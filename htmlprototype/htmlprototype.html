<head>
  <title>Prototype</title>
  <link href='http://fonts.googleapis.com/css?family=Roboto+Slab:400,700|Open+Sans:400italic,600italic,400,600' rel='stylesheet' type='text/css'>
</head>

<body>
	{{> nav}}

	
	{{> zeroStateAddTag}}
	
	{{> tags}}

	{{> designs}}

	<div id="assets" class="row">
			{{> designFilters}}

			{{> assetFilters}}		
		

		<div class="content">
			{{> assets}}
			{{> assortment}}	
		</div>
	</div>

</body>

<template name="delete_products">
	<button id="delete_products" class="alert">delete products</button>
</template>

<template name="nav">
	<nav class="row">
		<!-- <div id="nav_new_tag" class="nav_item" data-variable="zeroStateAddTag">Manage global tags</div> -->
		<div id="nav_designs" class="nav_item" data-variable="showDesigns">Manage Designs</div>
		<div id="nav_tags" class="nav_item" data-variable="showGLobalTags">Prototype Settings</div>
		<div id="nav_assets" class="nav_item" data-variable="showAssets">Manage Products</div>
		<div id="nav_assortment" class="nav_item" data-variable="showAssortment">Assortment</div>
	</nav>
</template>

<template name="designFilters">
	<a href="#" data-reveal-id="designFilterList" class="button">Filter by Design</a>

	<div id="designFilterList" class="reveal-modal" data-reveal>
		{{> designFiltersListed}}
	  <a class="close-reveal-modal">&#215;</a>
	</div>
</template>

<template name="designFiltersListed">
	<h4>Filter Products by designs</h4>
	<p>Select one or more designs to find products that have those applied to them.</p>
	{{#each designs}}
		<input type="checkbox" name="designfilter_{{_id}}" id="designfilter_{{_id}}" class="designfilter tagcheckbox" value="{{_id}}">
		<label for="designfilter_{{_id}}" class="tag design_tag">
			<img src="{{url}}" alt="">
		</label>
	{{/each}}
</template>

<template name="zeroStateAddTag">
{{#if zeroStateAddTag}}
	<div class="small-4 columns">
		<h2>Add Tag</h2>
		<input type="text" id="zeroStateAddTag_new_tag_name">
		<button id="zeroStateAddTag_new_tag_save" class="tiny button primary">save new tag</button>
	</div>	
{{/if}}		
</template>

<template name="assetFilters">
	{{#if showFilters}}
		<aside id="assets_filters">
			<h3>Apply Filters:</h3>
			{{> assetFiltersStatuses}}
			<hr>
			<h3>Filter by Tag:</h3>
			{{> assetFiltersTags}}
		</aside>
	{{/if}}

</template>

<template name="assetFiltersTags">
	<div id="assetFiltersTags">
		{{#each assetFiltersTags}}
			<input type="checkbox" class="assetFiltersTag tagcheckbox" id="{{tag}}" value="{{_id}}">
			<label for="{{tag}}" class="tag">{{tag}}</label>
		{{/each}}
	</div>
</template>

<template name="assetFiltersStatuses">
	<div id="assetFiltersStatuses">
		<!-- ADD the variables for value and ID to be able to filter by them -->
		<button data-options="align:right" data-dropdown="approved_for_POS_filter" aria-controls="approved_for_POS_filter" aria-expanded="true" class="secondary dropdown-arrow-right">
		Approved for Marketplaces</button>
		<ul id="approved_for_POS_filter" class="f-dropdown content" data-dropdown-content aria-hidden="true" tabindex="-1">
		{{#each assetFilterApprovalCountries}}
			<li>
				<input type="checkbox" name="assetFiltersApprovalStatus" id="assetFiltersApprovalStatus_{{_id}}" data-label="approvedForPOS" data-value="{{_id}}" data-singleOrMultiValue="multi" class="assetFiltersTag tagcheckbox">
				<label for="assetFiltersApprovalStatus_{{_id}}" class="tag">{{country}}</label>
			</li>
		{{/each}}
		</ul>
		<h5>Shops:</h5>
		{{#each assetFilterApprovalShops}}
			<input type="checkbox" name="assetFiltersPublishedShops" id="assetFiltersPublishedShops_{{_id}}" data-label="publishedshops" data-value="{{_id}}" data-singleOrMultiValue="multi" class="assetFiltersTag tagcheckbox">
			<label for="assetFiltersPublishedShops_{{_id}}" class="tag">{{shop}}</label>
		{{/each}}
		<input type="checkbox" name="assetFiltersApprovalStatus" id="assetFiltersFileFormatBitmap" data-label="fileformat" data-value="bitmap" data-singleOrMultiValue="single" class="assetFiltersTag tagcheckbox">
		<label for="assetFiltersFileFormatBitmap" class="tag">bitmap</label>

		<hr>

		<h5>Used in product creation:</h5>
		<input type="checkbox" name="assetFiltersUsage" id="assetFiltersUnused" data-label="usage" data-value="unused" data-singleOrMultiValue="single" class="assetFiltersTag tagcheckbox">
		<label for="assetFiltersUnused" class="tag">unused</label>
		<input type="checkbox" name="assetFiltersUsage" id="assetFiltersUsed" data-label="usage" data-value="used" data-singleOrMultiValue="single" class="assetFiltersTag tagcheckbox">
		<label for="assetFiltersUsed" class="tag">used</label>

		<hr>

		<h5>Review Status:</h5>
		<input type="checkbox" name="assetFiltersReview" id="assetFiltersNotReviewed" data-label="review" data-value="not reviewed" data-singleOrMultiValue="single" class="assetFiltersTag tagcheckbox">
		<label for="assetFiltersNotReviewed" class="tag">not reviewed</label>
		<input type="checkbox" name="assetFiltersReview" id="assetFiltersInReview" data-label="review" data-value="in review" data-singleOrMultiValue="single" class="assetFiltersTag tagcheckbox">
		<label for="assetFiltersInReview" class="tag">in review</label>
		<input type="checkbox" name="assetFiltersReview" id="assetFiltersReviewedNotApproved" data-label="review" data-value="reviewed not approved" data-singleOrMultiValue="single" class="assetFiltersTag tagcheckbox">
		<label for="assetFiltersReviewedNotApproved" class="tag">reviewed (not approved)</label>
		<input type="checkbox" name="assetFiltersReview" id="assetFiltersReviewedApproved" data-label="review" data-value="reviewed approved" data-singleOrMultiValue="single" class="assetFiltersTag tagcheckbox">
		<label for="assetFiltersReviewedApproved" class="tag">reviewed (approved)</label>

	</div>
</template>

<template name="designs">
	{{#if showDesigns}}	
		<div id="tags" class="row">
			<div class="small-12 columns">
				<h2 class="title">My Designs</h2>	
				<input type="hidden" id="design_id">
				<label for="design_name">Name</label><input type="text" id="design_name">
				<label for="design_url">URL</label><input type="text" id="design_url">
				{{#if editing_design}}
					<button id="design_save" class="tiny button primary">save design</button>
					<button id="design_delete" class="tiny button primary alert">delete design</button>
				{{else}}
					<button id="design_save" class="tiny button primary">add design</button>
				{{/if}}
				<hr>
				{{#each designs}}
					<div class="flexigrid-item the_design small-6 medium-4 large-3 columns" id="{{_id}}">
						<div class="box">
							<figure>
								<img src="{{url}}" alt="{{description}}">
							</figure>
								<h4><strong>{{name}}</strong></h4>
						</div>
					</div>
				{{/each}}
			</div>
		</div>
	{{/if}}	
</template>

<template name="tags">
	{{#if showGLobalTags}}	
		<div id="tags" class="row">
			<div class="small-12 columns">
				<h2 class="title">My Tags</h2>		
				<div class="row">
					{{#if new_tag}}
						<input type="text" id="tag_new_tag_name">
						<button id="tag_new_tag_save" class="tiny button primary">save new tag</button>
						
					{{else}}
						<button class="category button primary small" id="tag_add_new">&plus; add new tag</button>
					{{/if}}

					{{#each tags}}
						{{> tag}}
					{{/each}}
				</div>	
			</div>
				{{> delete_products}}
		</div>
	{{/if}}

</template>

<template name="tag">
	{{#if edit_tag}}
		<div class="row">
			<input id="tag_edit_value" type="text" class="button small secondary tag" value="{{tag}}">
			<button id="tag_edit_cancel" class="tiny secondary">Cancel</button>
			<button id="tag_edit_save" class="tiny primary">Save</button>
			<button id="tag_edit_delete" class="tiny primary alert">Delete</button>
		</div>
	{{else}}
		<div class="button small secondary tag">{{tag}}</div>
	{{/if}}	
</template>

<template name="assortment">
	{{#if showAssortment}}
		<div class="assetcontainer flexigrid">
			{{#each products}}
				<div class="flexigrid-item product">
					<div class="box">
						{{#if editing_product}}
							<input type="hidden" id="product_id" value="{{_id}}">
							<input type="text" id="product_url" value="{{resources.href}}">
							<input type="text" id="product_name" value="{{name}}">
							<input type="text" id="product_price" value="{{price.vatIncluded}}">
							<select name="product_category" id="product_category" value="{{category}}">
								<option value="Men">
									Men
								</option>
								<option value="Women" >
									Women
								</option>
								<option value="Kids &amp; Babies">
									Kids &amp; Babies
								</option>
								<option value="Accessories">
									Accessories
								</option>
								<option value="Cases">
									Cases
								</option>
							</select>
							<button id="cancel_product" class="tiny secondary">Cancel</button>
							<button id="save_product" class="tiny primary">Save</button>
						{{else}}
							<img src="{{resources.href}}" alt="" class="main">
							<h6>{{name}}</h6>
							<p><strong name="price">Price: ${{price.vatIncluded}}</strong><br>Commmission: ${{commission}}<br>
							<em>{{category}}</em></p>
						{{/if}}
					</div>
				</div>
			{{/each}}
		</div>
	{{/if}}	
</template>

<template name="assets">
{{#if showAssets}}
	<div id="assets">
		<h2 class="title">My Products</h2>
		{{#if new_edit_asset}}
			<div class="assets">
				<input type="hidden" id="newAssetId" value="{{newAssetId}}">
				<img src="{{editAssetUrl}}" alt="" class="edit_asset_img">
				<hr>
				
				{{#each designs}}
					<input type="checkbox" name="design_{{_id}}" id="design_{{_id}}" class="newAssetDesign tagcheckbox" checked="{{newAssetDesignSelection}}" value="{{_id}}">
					<label for="design_{{_id}}" class="tag design_tag">
						<img src="{{url}}" alt="">
					</label>
				{{/each}}

				<input type="checkbox" class="newAssetTag tagcheckbox" id="newAsset{{tag}}" value="{{_id}}" checked="{{newAssetTagSelection}}">
						<label for="newAsset{{tag}}" class="tag">{{tag}}</label>

				<hr>
				
				<input type="text" id="newAssetName" placeholder="Name" value="{{editAssetName}}"><br>
				<input type="text" id="newAssetUrl" placeholder="Url" value="{{editAssetUrl}}">
				<br>
				<textarea type="text" id="newAssetDescription" placeholder="Description">{{newAssetDescription}}</textarea>
				<br>
				<select type="text" id="newAssetProduct">
					<option value="">{{newAssetProduct}}</option>
					{{#each products}}
						<option value="{{_id}}" selected="{{newAssetProduct}}">{{name}}</option>
					{{/each}}
				</select><br>
				<div id="newAssetTagContainer">
				<h3>Select Tags</h3>
					{{#each tags}}
						<input type="checkbox" class="newAssetTag tagcheckbox" id="newAsset{{tag}}" value="{{_id}}" checked="{{newAssetTagSelection}}">
						<label for="newAsset{{tag}}" class="tag">{{tag}}</label>
					{{/each}}
				</div>

				<hr>
				<h2>System Metadata</h2>
				<h3>File Format (Bitmap/Vector)</h3>
				<input type="radio" name="newAssetFileFormat" id="newAssetFileFormatVector" value="vector" checked="{{newAssetVector}}">
				<label for="newAssetFileFormatVector">Vector</label>
				<input type="radio" name="newAssetFileFormat" id="newAssetFileFormatBitmap" value="bitmap" checked="{{newAssetBitmap}}">
				<label for="newAssetFileFormatBitmap">Bitmap</label>

				<!-- <h3>Usage</h3>
				<input type="radio" name="newAssetUsage" id="newAssetUsageUnused" value="unused" checked="{{newAssetUnused}}">
				<label for="newAssetUsageUnused">Unsed</label>
				<input type="radio" name="newAssetUsage" id="newAssetUsageUsed" value="used" checked="{{newAssetUsed}}">
				<label for="newAssetUsageUsed">Used</label> -->

				<h3>Review</h3>
				<input type="radio" name="newAssetReview" id="newAssetReviewNotReviewed" value="not reviewed" checked="{{newAssetNotReviewed}}">
				<label for="newAssetReviewNotReviewed">Not Reviewed</label>
				<input type="radio" name="newAssetReview" id="newAssetReviewInReview" value="in review" checked="{{newAssetInReview}}">
				<label for="newAssetReviewInReview">In Review</label>
				<input type="radio" name="newAssetReview" id="newAssetReviewReviewedNotApproved" value="reviewed not approved" checked="{{newAssetReviewedNotApproved}}">
				<label for="newAssetReviewReviewed">Reviewed (Not Approved)</label>
				<input type="radio" name="newAssetReview" id="newAssetReviewReviewedApproved" value="reviewed approved" checked="{{newAssetReviewedApproved}}">
				<label for="newAssetReviewReviewed">Reviewed (Approved)</label>

				

				{{#if newAssetIsApproved}}
				<h3>Approved for Point of Sale:</h3>
					<div class="clearfix">
						{{#each POS_MP_Country}}
							<input type="checkbox" class="newAssetApprovedForPOS tagcheckbox" id="approvedForPOS_{{country}}" value="{{_id}}" checked="{{assetFilterApprovalCountries}}">
							<label for="approvedForPOS_{{country}}" class="tag">{{country}}</label>
						{{/each}}
					</div>
				{{/if}}

				<h3>Published to Spreadshirt Marketplaces</h3>
				<input type="radio" name="newAssetPublished" id="newAssetPublishedUnpublished" value="unpublished" checked="{{newAssetUnpublished}}">
				<label for="newAssetPublishedUnpublished">Unpublished</label>
				<input type="radio" name="newAssetPublished" id="newAssetPublishedPublished" value="published" checked="{{newAssetPublished}}">
				<label for="newAssetPublishedPublished">Published</label>
				{{#if newAssetIsPublished}}
					<div class="clearfix">
						{{#each countries}}
							<input type="checkbox" class="newAssetPublishedCountry tagcheckbox" id="{{country}}" value="{{_id}}" checked="{{newAssetPublishedCountries}}">
							<label for="{{country}}" class="tag">{{country}}</label>
						{{/each}}
					</div>
				{{/if}}

				<h3>Published to Shops</h3>
				{{#each shops}}
					<input type="checkbox" class="newAssetPublishedShop tagcheckbox" id="{{shop}}" value="{{_id}}" checked="{{newAssetPublishedShops}}">
					<label for="{{shop}}" class="tag">{{shop}}</label>
				{{/each}}

				<hr>
					
				<button id="btnCancelAsset" value="cancel" class="secondary small">Cancel</button>
				<button id="btnSaveAsset" value="save" class="small">Save</button>


			</div>
		{{else}}
			<img src="img/grid.png" alt="" class="button tiny secondary" style="width: 25px; padding: 5px;" id="assetgridview">
			<img src="img/table.png" alt="" class="button tiny secondary" style="width: 25px; padding: 5px;" id="assetlistview">
			{{#if assetgridview}}
				<div class="assetcontainer flexigrid">
					<div class="flexigrid-item" id="btnNewAsset">
						<div class="box">
							<div class="dottedline">
								<h1>&plus;</h1>
								<strong>create new Product</strong>
							</div>
						</div>
					</div>
					{{#each assets}}
						{{> asset}}
					{{/each}}
				</div>
			{{else}}
				<div class="assetcontainer listview">
					<button id="btnNewAsset" class="secondary tiny">create new Product</button><br><br>
					<table>
						<thead>
							<td></td>
							<td>Preview</td>
							<td>Name</td>
							<td>Description</td>
							<td>Tags</td>
							<td>File format</td>
							<td>Usage</td>
							<td>Published</td>
							<td>Review</td>
						</thead>
						{{#each assets}}
							{{> asset}}
						{{/each}}
					</table>
				</div>
			{{/if}}
		{{/if}}

		
	</div>
{{/if}}
</template>

<template name="asset">
	{{#if assetnotfiltered}}
		{{#if assetnotfilteredbydesign}}
			{{#if assetnotfilteredbystatus}}
				{{#if assetgridview}}
				<div class="flexigrid-item" id="{{_id}}">
					<div class="box">
						<figure style="background: url({{product_url}}) no-repeat; background-size: contain;" class="asset_view">
							{{#each designs}}
								<img src="{{design_url}}">
							{{/each}}
						</figure>
						<h4><strong>{{name}}</strong></h4>
						<button class="secondary tiny edit_asset_button" data-id="{{_id}}">Edit</button>
					</div>
				</div>

				{{else}}

				<tr>
					<td><input type="checkbox" name="" id=""></td>
					<td><img src="{{url}}" alt="{{description}}"></td>
					<td><strong>{{name}}</strong></td>
					<td>{{description}}</td>
					<td>
						{{#each appliedtags}}
							{{> singletag}}
						{{/each}}
					</td>
					<td>{{fileformat}}</td>
					<td>{{usage}}</td>
					<td>{{published}}<br>{{publishedcountries}}</td>
					<td>{{review}}</td>
				</tr>
				{{/if}}
			{{/if}}
		{{/if}}
	{{/if}}
</template>



<!-- Single Tag displayed on a design or product -->
<template name="singletag">
	<div id="{{this}}" class="tag button tiny secondary">{{the_tag}}</div>
</template>



